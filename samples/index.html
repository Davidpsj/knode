<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

  <link href="../style.css" type="text/css" rel="stylesheet"/>
  <!-- jQuery and UI for draggable nodes -->
  <script type="text/javascript" src="../jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="../jqueryui/1.11.4/jquery-ui.min.js"></script>
  <!-- Raphael for SVG graphics -->
  <script type="text/javascript" src="../raphael/2.1.4/raphael-min.js"></script>
  <!-- Node map -->
  <script type="text/javascript" src="../nodemap.js"></script>

  <script type="text/javascript">

    // Create the map directly from the DOM list. If a DOM list isn't available
    // the map can also be created with the following API
    var map;
    $(document).ready(function() {

      map = $('#map').createNodeMap({scaleLevel: 0.5});
      map.createNodes($('#ulList'));
    });

    function addSub3Node () {
      var sub3Node = map.getNodeFromId ("sub3");
      sub3Node.addChildNode (null, "href", "I'm a child");
    }
    function removeSubSubNode22 () {
      var subsub22Node = map.getNodeFromId ("subsub22");
      subsub22Node.deleteNode ();
    }
    function selectSubnode4 () {
      var subnode4 = map.getNodeFromId ("subnode4");
      subnode4.markAsSelected ();
    }

    function recreateMapFromAPI () {
        map.clearMap ();
        
        // Create a new root node
        var newRoot = map.createRootNode ("root", null, "new Root");
        // and a child element
        newRoot.addChildNode(null, null, "New Child");
        newRoot.addChildNode(null, null, "New Child 2");
    }

  </script>

</head>
<body>
  <input type="button" onclick="addSub3Node()" value="Add Sub3Node"/>
  <input type="button" onclick="removeSubSubNode22()" value="Remove SubSub22Node"/>
  <input type="button" onclick="selectSubnode4()" value="Select subnode4"/>
  <input type="button" onclick="recreateMapFromAPI()" value="Delete map and recreate from API"/>
  <div id="ulList">
    <!--
      This is a list of elements to generate a map directly from the DOM
      The format is

        <ul>
          <li><a href="This list item links to..">List Item</a></li>
          <li>
            <ul>
              <li><div>SubList Item which doesn't link to anything</div></li>
            </ul>
          </li>
        </ul>
    -->
    <ul>
      <li><a href="root" id="root">Root node</a>
        <ul>
          <li><div>Subnode 1</div></li>
          <li><a>Subnode 2 (also a list)</a>
            <ul>
              <li><a>Sub Subnode 2-1</a></li>
              <li><a id="subsub22">Sub Subnode 2-2</a></li>
              <li><a href="subsubnode23">Sub Subnode 2-3</a></li>
            </ul>
          </li>
          <li><a id="sub3">Subnode 3</a>
            <ul>
              <li><a>Sub Subnode 3-1</a></li>
              <li><a>Sub Subnode 3-2</a></li>
              <li><a>Sub Subnode 3-3</a></li>
              <li><a>Sub Subnode 3-4</a></li>
            </ul>
          </li>
          <li><a id="subnode4">Subnode 4</a>
            <ul>
              <li><a>Sub Subnode 4-1</a></li>
              <li><a>Sub Subnode 4-2</a></li>
              <li><a>Sub Subnode 2-3</a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <!--
    The map will be created in the javascript-selected map tag (#map here).
    If a parent element with scale properties is present, the scale level will
    have to be specified when creating map contents as well.
  -->
  <div id="map" style="width:550px; height:550px; border: 2px solid black;">
  </div>

</body>
</html>
