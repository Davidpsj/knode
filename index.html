<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="KNode : KNode is a node map web rendering library for dynamic content management">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>KNode demo</title>
    
    <link href="knode/style.css" type="text/css" rel="stylesheet"/>
    <!-- jQuery and UI for draggable nodes -->
    <script type="text/javascript" src="knode/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="knode/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <!-- Raphael for SVG graphics -->
    <script type="text/javascript" src="knode/raphael/2.1.4/raphael-min.js"></script>
    <!-- Node map -->
    <script type="text/javascript" src="knode/nodemap.js"></script>

    <script type="text/javascript">

      // Create the map directly from the DOM list. If a DOM list isn't available
      // the map can also be created with the provided API (see recreateMapFromAPI())
      var map;
      var root;
      $(document).ready(function() {
      
        map = $('#map').createNodeMap({scaleLevel: 0.5});
        root = map.createRootNode ("root", null, "Root node");
        
        var sciencesNode, languagesNode, animalsNode, planetsNode;
        
        var gotoHrefCallback = function () {
          window.location = this.href;
        };
        
        root.callback = function () {
          $('#mosquitoBtn').css('display', 'none');
          this.markAsSelected ();
          this.$element.removeClass("parent");
          $.each(map.getNodes(), function () {
            if(this.id != "root")
              this.deleteNode();
          });
          sciencesNode  = root.addChildNode ("sciences", null, "Sciences");
          languagesNode = root.addChildNode ("languages", null, "Languages");
          animalsNode   = root.addChildNode ("animals", null, "Animals");
          planetsNode   = root.addChildNode ("planets", null, "Planets");
          
          sciencesNode.callback = function () {
            if (map.getRootNode() === sciencesNode)
              return;
              
            sciencesNode.markAsSelected ();
            var delay = 0;
            setTimeout ( function() {
              languagesNode.deleteNode ();            
              }, (delay += 50) );
            setTimeout ( function() {
              animalsNode.deleteNode ();
              }, (delay += 50) );
            setTimeout ( function() {
              planetsNode.deleteNode ();
              }, (delay += 50) );
            root.$element.addClass('parent');
            setTimeout ( function() {
              sciencesNode.addChildNode ("biology", "http://en.wikipedia.org/wiki/Biology", "Biology").callback = gotoHrefCallback;
              }, (delay += 500) );
            setTimeout ( function() {
              sciencesNode.addChildNode ("chemistry", "http://en.wikipedia.org/wiki/Chemistry", "Chemistry").callback = gotoHrefCallback;
              }, (delay += 500) );
            setTimeout ( function() {
              sciencesNode.addChildNode ("mathematics", "http://en.wikipedia.org/wiki/Mathematics", "Mathematics").callback = gotoHrefCallback;
              }, (delay += 500) );
            setTimeout ( function() {
              sciencesNode.addChildNode ("medicine", "http://en.wikipedia.org/wiki/Medicine", "Medicine").callback = gotoHrefCallback;
              }, (delay += 500) );
          };
          
          planetsNode.callback = function () {
            if (map.getRootNode() === planetsNode)
              return;
              
            planetsNode.markAsSelected ();
            languagesNode.deleteNode ();            
            animalsNode.deleteNode ();
            sciencesNode.deleteNode ();
            root.$element.addClass('parent');
              
            planetsNode.addChildNode ("saturn", null, "Saturn");
            var earthNode = planetsNode.addChildNode ("earth", null, "Earth");
            planetsNode.addChildNode ("jupiter", null, "Jupiter");
            planetsNode.addChildNode ("mars", null, "Mars");            
            setTimeout ( function() {
              var moonNode = earthNode.addChildNode ("moon", null, "<img class='noBoxShadow' src='images/moon.png'> Moon");
              moonNode.$element.css('width', '70px');
              moonNode.$element.css('height', '70px');
              }, 1500 );
          };
          
          languagesNode.callback = function () {
            if (map.getRootNode() === languagesNode)
              return;
          
            languagesNode.markAsSelected ();
            root.$element.addClass('parent');
            sciencesNode.deleteNode ();            
            animalsNode.deleteNode ();
            planetsNode.deleteNode ();
            var delay = 0;
            setTimeout ( function() {
              languagesNode.addChildNode ("italian", null, "<img class='noBoxShadow' src='images/italy_flag.jpg'> Italian");              
              }, (delay += 500) );
            setTimeout ( function() {
              languagesNode.addChildNode ("english", null, "<img class='noBoxShadow' src='images/england_flag.jpg'> English");
              }, (delay += 500) );
            setTimeout ( function() {
              languagesNode.addChildNode ("french", null, "<img class='noBoxShadow' src='images/france_flag.jpg'> French");
              }, (delay += 500) );
          };
          
          animalsNode.callback = function () {
            if (map.getRootNode() === animalsNode)
              return;
          
            animalsNode.markAsSelected ();
            languagesNode.deleteNode ();            
            planetsNode.deleteNode ();
            sciencesNode.deleteNode ();
            root.$element.addClass('parent');
            $('#mosquitoBtn').css('display', 'block');
            
            animalsNode.addChildNode ("mosquito", null, "Annoying Mosquito");
            animalsNode.addChildNode ("mosquito", null, "Annoying Mosquito");
            animalsNode.addChildNode ("mosquito", null, "Annoying Mosquito");
            animalsNode.addChildNode ("mosquito", null, "Annoying Mosquito");
            animalsNode.addChildNode ("mosquito", null, "Annoying Mosquito");
          };
        };
        root.callback();
      });
      
      function killMosquitoNode() {
        var mosquitoNode = null;
        var nodes = map.getNodes();
        for (var i=0; i<nodes.length; ++i) {       
          if(nodes[i].id == "mosquito") {
            mosquitoNode = nodes[i];
            break;
          }
        }
        if(mosquitoNode != null)
          mosquitoNode.deleteNode();
      }
      
    </script>
    
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/marcodiiga/knode">View on GitHub</a>

          <h1 id="project_title">KNode</h1>
          <h2 id="project_tagline">KNode is a node map web rendering library for dynamic content management optimized for Chrome and Firefox</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/marcodiiga/knode/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/marcodiiga/knode/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to KNode demo page</h3>

        <p>This is KNode: a web rendering library for node maps and dynamic content management
        
        <!--
          The map will be created in the javascript-selected map tag (#map here).
          If a parent element with scale properties is present, the scale level will
          have to be specified when creating map contents as well.
        -->
        <center>
          <input type="button" id="mosquitoBtn" onclick="killMosquitoNode()" style="display:none; width:400px; margin: 5px;" value="Kill an annoying mosquito"/>
          <div id="map" style="width:450px; height:450px; border: 2px solid black;">          
          </div>          
        </center>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">KNode maintained by <a href="https://github.com/marcodiiga">@marcodiiga</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
        <p>Flags images courtesy of <a href="http://www.all-flags-world.com/">AllFlagsWorld.com</a></p>
      </footer>
    </div>

    

  </body>
</html>
